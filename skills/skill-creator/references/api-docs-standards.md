# APIドキュメント品質基準

> **読み込み条件**: APIドキュメント生成時
> **相対パス**: `references/api-docs-standards.md`

---

## 概要

APIセットアップドキュメントは、**そのドキュメントだけでタスクが完了できる**レベルの詳細さを持つ必要がある。

### 基本原則

| 原則 | 説明 |
|------|------|
| **自己完結** | 外部参照なしで作業完了可能 |
| **目的明示** | 各ステップの「なぜ」を説明 |
| **場所明示** | どこで何をするか具体的に記述 |
| **検証可能** | 成功確認方法を必ず含める |
| **最新性** | 公式ドキュメントを参照し最新情報を反映 |

---

## 必須セクション

### 1. 概要

```markdown
## 概要

### 目的
このドキュメントを完了すると、[具体的にできるようになること]が可能になります。

### 前提条件
- [ ] [必要なアカウント]を持っている
- [ ] [必要なツール]がインストールされている
- [ ] [必要な権限]を持っている

### 所要時間
約XX分（手順通りに進めた場合）
```

### 2. 各ステップの構造

```markdown
## Step N: [アクション名]

### 目的
なぜこのステップが必要か、このステップで何を達成するか

### 場所
- **URL**: https://console.example.com/path/to/page
- **ナビゲーション**: ダッシュボード > 設定 > API

### 操作手順
1. [具体的な操作]
   - 補足説明
   - クリックする場所の詳細
2. [次の操作]
   - 入力する値: `具体的な値`
   - 選択する項目: [項目名]

### 期待される結果
[操作後に表示されるべきもの、状態の変化]

### 確認方法
[成功したことをどう確認するか]

### トラブルシューティング
| 問題 | 原因 | 解決方法 |
|------|------|---------|
| [エラーメッセージ] | [原因] | [解決手順] |
```

### 3. 設定値サマリー

```markdown
## 設定値一覧

| 設定項目 | 値 | 取得場所 | 用途 |
|----------|-----|----------|------|
| API_KEY | [Step 3で取得] | コンソール > 認証情報 | 認証用 |
| PROJECT_ID | [Step 1で確認] | プロジェクト設定 | プロジェクト識別 |
```

### 4. 動作確認

```markdown
## 動作確認

### 確認コマンド
```bash
curl -H "Authorization: Bearer $API_KEY" \
  https://api.example.com/v1/test
```

### 期待される出力
```json
{
  "status": "ok",
  "message": "API is working"
}
```

### 成功基準
- ステータスコード200が返る
- レスポンスに`status: "ok"`が含まれる
```

### 5. 参照ドキュメント

```markdown
## 参照ドキュメント

| ドキュメント | URL | 最終確認日 |
|-------------|-----|-----------|
| 公式クイックスタート | https://... | 2024-XX-XX |
| API リファレンス | https://... | 2024-XX-XX |
```

---

## 品質チェックリスト

### 内容の完全性

| チェック項目 | 基準 |
|-------------|------|
| ☐ 目的が明記されている | 「何ができるようになるか」が明確 |
| ☐ 前提条件がリストされている | 必要なアカウント、ツール、権限 |
| ☐ 全ステップに場所が明記されている | URL、ナビゲーションパス |
| ☐ 全ステップに目的が明記されている | 「なぜこれが必要か」 |
| ☐ 具体的な操作手順がある | クリック、入力、選択の詳細 |
| ☐ 期待される結果がある | 操作後の状態 |
| ☐ 確認方法がある | 成功をどう確認するか |
| ☐ 設定値サマリーがある | 取得した値の一覧 |
| ☐ 動作確認方法がある | 実行コマンドと期待出力 |
| ☐ トラブルシューティングがある | よくある問題と解決方法 |
| ☐ 参照ドキュメントがある | 公式ドキュメントへのリンク |

### 表現の明確性

| チェック項目 | 基準 |
|-------------|------|
| ☐ 曖昧な表現がない | 「適切な」→「XXX」等の具体化 |
| ☐ 専門用語に説明がある | 初見の用語には補足 |
| ☐ 操作対象が明確 | 「ボタン」→「[保存]ボタン」 |
| ☐ パスが完全 | 相対パスでなくフルパス/URL |

---

## 公式ドキュメント参照のガイドライン

### 1. 情報取得の優先順位

1. **公式ドキュメント**（最優先）
   - クイックスタートガイド
   - APIリファレンス
   - 認証ガイド

2. **公式ブログ/アナウンス**
   - 新機能の発表
   - 変更点の通知

3. **公式GitHubリポジトリ**
   - サンプルコード
   - SDK使用例

### 2. 情報の検証

```markdown
### 検証チェックリスト
- [ ] 公式ドキュメントのURLが有効
- [ ] 記載の手順が現在のUIと一致
- [ ] サンプルコードが動作する
- [ ] 最終更新日を記録
```

### 3. バージョン管理

```markdown
### ドキュメントメタ情報
- **対象APIバージョン**: v2.0
- **公式ドキュメント確認日**: 2024-XX-XX
- **このドキュメントバージョン**: 1.0.0
```

---

## プロバイダー別テンプレート

### Google Cloud / Google APIs

```markdown
## Google [API名] セットアップガイド

### Step 1: Google Cloud プロジェクト作成/選択
**目的**: APIを有効化するプロジェクトを準備
**場所**: https://console.cloud.google.com/projectcreate

### Step 2: APIの有効化
**目的**: [API名]を使用可能にする
**場所**: https://console.cloud.google.com/apis/library/[api].googleapis.com

### Step 3: 認証情報の作成
**目的**: APIアクセス用の認証情報を取得
**場所**: https://console.cloud.google.com/apis/credentials
**選択**: [APIキー / OAuth 2.0 / サービスアカウント]

### Step 4: 環境変数の設定
**目的**: 認証情報をアプリケーションで使用
```

### AWS

```markdown
## AWS [サービス名] セットアップガイド

### Step 1: IAMユーザー/ロールの作成
**目的**: 適切な権限を持つアクセス主体を作成
**場所**: https://console.aws.amazon.com/iam/

### Step 2: ポリシーのアタッチ
**目的**: 必要な権限を付与
**必要なポリシー**: [ポリシー名]

### Step 3: アクセスキーの作成
**目的**: プログラムからのアクセス用認証情報を取得
**場所**: IAM > ユーザー > セキュリティ認証情報

### Step 4: AWS CLIの設定
**目的**: ローカル環境からAWSにアクセス可能にする
```

### Stripe

```markdown
## Stripe API セットアップガイド

### Step 1: Stripeアカウントの作成
**目的**: Stripeダッシュボードへのアクセス
**場所**: https://dashboard.stripe.com/register

### Step 2: APIキーの取得
**目的**: 認証用のシークレットキーを取得
**場所**: https://dashboard.stripe.com/apikeys

### Step 3: テストモードの確認
**目的**: 本番環境に影響せずテスト可能にする
**確認**: ダッシュボード右上の「テストモード」がON
```

---

## アンチパターン

### 避けるべき表現

| NG | OK |
|----|-----|
| 「適切な設定を行う」 | 「[設定名]を[値]に設定する」 |
| 「必要に応じて」 | 「[条件]の場合は[操作]」 |
| 「詳細は公式ドキュメント参照」 | 手順を具体的に記載 + 参照リンク |
| 「ここをクリック」 | 「[ボタン名]ボタンをクリック」 |
| 「上記の手順で」 | 「Step 3で取得した[値]を」 |

---

## 関連リソース

- [setup-guide-template.md](../assets/setup-guide-template.md) - テンプレート
- [schemas/api-documentation.json](../schemas/api-documentation.json) - スキーマ
- [schemas/setup-guide.json](../schemas/setup-guide.json) - スキーマ
