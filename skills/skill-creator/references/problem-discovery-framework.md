# Problem Discovery Framework

> **読み込み条件**: collaborativeモード時（Phase 0-0）、問題分析時
> **相対パス**: `references/problem-discovery-framework.md`

---

## 目的

スキル作成の前に**本質的な問題**を特定する。
機能要求の裏にある根本原因を明らかにし、問題−解決の適合（Problem-Solution Fit）を保証する。

---

## 1. 問題空間と解決空間の分離

| 空間     | 問い               | 成果物     | 担当Phase   |
| -------- | ------------------ | ---------- | ----------- |
| 問題空間 | 何が問題か？なぜ？ | 問題定義書 | Phase 0-0   |
| 解決空間 | どう解決するか？   | スキル設計 | Phase 1以降 |

**原則**: 問題空間を十分に探索してから解決空間に移行する。
早すぎる解決策の提示は、症状への対処療法に陥る。

---

## 2. 根本原因分析（Root Cause Analysis）

### 2.1 5 Whys テクニック

表面的な問題から根本原因に到達するまで「なぜ？」を繰り返す。

```
問題: 「PRレビューが遅い」
  Why 1: レビューアに通知が届かないから → 通知の問題？
  Why 2: PRの量が多すぎて優先度が分からないから → 優先度の問題？
  Why 3: PRが大きすぎて着手しづらいから → PR粒度の問題？
  Why 4: 作業単位の分解ができていないから → タスク分解の問題？
  Why 5: タスクの定義が曖昧だから → ★根本原因: タスク定義の不明確さ
```

**適用ルール**:

| ルール             | 説明                                           |
| ------------------ | ---------------------------------------------- |
| 最低3回はWhyを問う | 表面的な回答で止まらない                       |
| 事実ベースで回答   | 推測ではなく観察可能な事実を求める             |
| 分岐を許容する     | 1つのWhyに複数の原因がある場合はすべて追跡する |
| 人ではなく仕組み   | 「誰が悪い」ではなく「何が機能していないか」   |

### 2.2 First Principles Thinking（第一原理思考）

前提条件を分解し、本当に必要な要素だけを再構築する。

```
ステップ1: 前提の列挙
  「PRレビューにはコードの全行を読む必要がある」
  「レビューは1人が担当する」
  「レビュー後に修正→再レビューが必要」

ステップ2: 前提の検証
  本当にそうか？自動化できる部分はないか？
  複数人で分担できないか？
  レビュー前に品質を担保できないか？

ステップ3: 必要十分な要素の再構築
  → 自動チェック + 焦点を絞ったレビュー + PR分割
```

**質問テンプレート**:

| 段階     | 質問                                                 |
| -------- | ---------------------------------------------------- |
| 前提列挙 | 「この作業において、当然だと思っていることは何か？」 |
| 前提検証 | 「その前提は本当に必須か？別の方法はないか？」       |
| 再構築   | 「制約をすべて外したとき、理想の状態は何か？」       |

---

## 3. 問題定義フレームワーク

### 3.1 問題ステートメント構造

```
[WHO] は [CONTEXT] において [PROBLEM] に直面しており、
その結果 [IMPACT] が発生している。
根本原因は [ROOT CAUSE] である。
```

**例**:

```
開発チームは、日常のPRレビューにおいて、
大きなPRの優先度判断と着手判断の困難さに直面しており、
その結果、レビュー遅延とマージブロックが発生している。
根本原因は、タスク分解の粒度基準が不明確であることである。
```

### 3.2 問題の分類

| 分類     | 特徴                     | アプローチ                 |
| -------- | ------------------------ | -------------------------- |
| 効率問題 | 既存プロセスが遅い・重い | 自動化・最適化             |
| 品質問題 | 成果物にばらつきがある   | 標準化・検証強化           |
| 知識問題 | ノウハウが属人的         | 文書化・テンプレート化     |
| 構造問題 | 仕組み自体に欠陥がある   | 再設計・アーキテクチャ変更 |
| 不在問題 | 必要な機能がそもそもない | 新規構築                   |

### 3.3 影響度の評価

| 評価軸   | 質問                                     |
| -------- | ---------------------------------------- |
| 頻度     | この問題はどの頻度で発生するか？         |
| 影響範囲 | 何人・どの範囲に影響があるか？           |
| 深刻度   | 発生時のビジネスインパクトはどの程度か？ |
| 緊急度   | すぐに対処が必要か、将来的な課題か？     |

---

## 4. Problem-Solution Fit 検証

スキル設計が問題に適合しているかを検証する。

### 4.1 適合チェックリスト

| チェック項目                             | 検証方法                       |
| ---------------------------------------- | ------------------------------ |
| 根本原因に対処しているか                 | 5 Whysの最深層と設計の照合     |
| 症状だけでなく原因を解消するか           | 問題再発の可能性を評価         |
| 過剰設計になっていないか                 | 問題の規模と解決策の規模を比較 |
| ユーザーの実際のコンテキストで機能するか | 使用場面シナリオで検証         |
| 新たな問題を生まないか                   | 副作用・依存関係のチェック     |

### 4.2 逆向き検証（Working Backwards）

```
1. スキルが完成した状態を想像する
2. ユーザーが実際に使う場面を具体的に描写する
3. その使用で問題が本当に解決されるか検証する
4. 解決されない場合、何が足りないかを特定する
```

---

## 5. ゴール設定フレームワーク

### 5.1 Outcome-Based Goals（成果ベースの目標）

| 種類            | 定義                    | 例                                |
| --------------- | ----------------------- | --------------------------------- |
| Output（出力）  | 作るもの                | 「PRテンプレートを生成する」      |
| Outcome（成果） | ユーザーの状態変化      | 「PRレビュー時間が50%短縮される」 |
| Impact（影響）  | ビジネス/チームへの影響 | 「リリース頻度が向上する」        |

**原則**: スキルのゴールはOutputではなくOutcomeで定義する。

### 5.2 目標の構造化

```json
{
  "primaryOutcome": "ユーザーが達成すべき状態変化",
  "successCriteria": [
    "具体的・計測可能な成功基準1",
    "具体的・計測可能な成功基準2"
  ],
  "nonGoals": ["このスキルでは対処しないこと"],
  "assumptions": ["この設計が前提としていること"]
}
```

---

## 6. インタビュー統合ガイド

Phase 0-0（問題発見）でのインタビュー質問:

| 段階         | 質問テンプレート                                 |
| ------------ | ------------------------------------------------ |
| 問題の特定   | 「今、最も困っていることは何ですか？」           |
| 影響の理解   | 「その問題が起きると、具体的に何が困りますか？」 |
| 頻度の確認   | 「どのくらいの頻度でその問題に遭遇しますか？」   |
| 原因の深掘り | 「なぜその問題が起きていると思いますか？」       |
| 試行の確認   | 「これまでにどんな対処を試みましたか？」         |
| 理想の確認   | 「理想的にはどうなっていてほしいですか？」       |
| 制約の確認   | 「変えられない制約は何かありますか？」           |

---

## 関連リソース

- **ドメインモデリング**: See [domain-modeling-guide.md](domain-modeling-guide.md)
- **Clean Architecture**: See [clean-architecture-for-skills.md](clean-architecture-for-skills.md)
- **インタビュー**: See [interview-guide.md](interview-guide.md)
- **Agent**: See [agents/discover-problem.md](../agents/discover-problem.md)
