{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/google-forms-generator/api-request.json",
  "title": "Google Forms API リクエストスキーマ",
  "description": "Google Forms APIへ送信するリクエストのスキーマ",
  "type": "object",
  "properties": {
    "createRequest": {
      "type": "object",
      "description": "forms.create リクエスト",
      "required": ["info"],
      "properties": {
        "info": {
          "type": "object",
          "required": ["title"],
          "properties": {
            "title": {
              "type": "string",
              "description": "フォームタイトル"
            }
          }
        }
      }
    },
    "batchUpdateRequests": {
      "type": "array",
      "description": "forms.batchUpdate リクエスト配列",
      "items": {
        "oneOf": [
          { "$ref": "#/$defs/updateFormInfo" },
          { "$ref": "#/$defs/updateSettings" },
          { "$ref": "#/$defs/createItem" },
          { "$ref": "#/$defs/updateItem" },
          { "$ref": "#/$defs/deleteItem" },
          { "$ref": "#/$defs/moveItem" }
        ]
      }
    },
    "publishRequest": {
      "type": "object",
      "description": "forms.setPublishSettings リクエスト",
      "properties": {
        "publishSettings": {
          "type": "object",
          "properties": {
            "publishState": {
              "type": "object",
              "properties": {
                "isPublished": {
                  "type": "boolean",
                  "description": "公開状態"
                },
                "isAcceptingResponses": {
                  "type": "boolean",
                  "description": "回答受付状態"
                }
              }
            }
          }
        }
      }
    },
    "driveRequest": {
      "type": "object",
      "description": "Drive API リクエスト（フォルダ移動）",
      "properties": {
        "folderId": {
          "type": "string",
          "description": "移動先フォルダID"
        }
      }
    }
  },
  "$defs": {
    "updateFormInfo": {
      "type": "object",
      "required": ["updateFormInfo"],
      "properties": {
        "updateFormInfo": {
          "type": "object",
          "required": ["info", "updateMask"],
          "properties": {
            "info": {
              "type": "object",
              "properties": {
                "title": { "type": "string" },
                "description": { "type": "string" }
              }
            },
            "updateMask": {
              "type": "string",
              "description": "更新フィールド（カンマ区切り）"
            }
          }
        }
      }
    },
    "updateSettings": {
      "type": "object",
      "required": ["updateSettings"],
      "properties": {
        "updateSettings": {
          "type": "object",
          "required": ["settings", "updateMask"],
          "properties": {
            "settings": {
              "type": "object",
              "properties": {
                "quizSettings": {
                  "type": "object",
                  "properties": {
                    "isQuiz": { "type": "boolean" }
                  }
                },
                "emailCollectionType": {
                  "type": "string",
                  "enum": ["DO_NOT_COLLECT", "VERIFIED", "RESPONDER_INPUT"]
                }
              }
            },
            "updateMask": {
              "type": "string"
            }
          }
        }
      }
    },
    "createItem": {
      "type": "object",
      "required": ["createItem"],
      "properties": {
        "createItem": {
          "type": "object",
          "required": ["item", "location"],
          "properties": {
            "item": {
              "type": "object",
              "properties": {
                "title": { "type": "string" },
                "description": { "type": "string" },
                "questionItem": { "$ref": "#/$defs/questionItem" },
                "questionGroupItem": { "$ref": "#/$defs/questionGroupItem" },
                "pageBreakItem": { "type": "object" },
                "textItem": { "type": "object" },
                "imageItem": { "$ref": "#/$defs/imageItem" },
                "videoItem": { "$ref": "#/$defs/videoItem" }
              }
            },
            "location": {
              "type": "object",
              "required": ["index"],
              "properties": {
                "index": {
                  "type": "integer",
                  "minimum": 0
                }
              }
            }
          }
        }
      }
    },
    "updateItem": {
      "type": "object",
      "required": ["updateItem"],
      "properties": {
        "updateItem": {
          "type": "object",
          "required": ["item", "location", "updateMask"],
          "properties": {
            "item": { "type": "object" },
            "location": {
              "type": "object",
              "properties": {
                "index": { "type": "integer" }
              }
            },
            "updateMask": { "type": "string" }
          }
        }
      }
    },
    "deleteItem": {
      "type": "object",
      "required": ["deleteItem"],
      "properties": {
        "deleteItem": {
          "type": "object",
          "required": ["location"],
          "properties": {
            "location": {
              "type": "object",
              "required": ["index"],
              "properties": {
                "index": { "type": "integer" }
              }
            }
          }
        }
      }
    },
    "moveItem": {
      "type": "object",
      "required": ["moveItem"],
      "properties": {
        "moveItem": {
          "type": "object",
          "required": ["originalLocation", "newLocation"],
          "properties": {
            "originalLocation": {
              "type": "object",
              "required": ["index"],
              "properties": {
                "index": { "type": "integer" }
              }
            },
            "newLocation": {
              "type": "object",
              "required": ["index"],
              "properties": {
                "index": { "type": "integer" }
              }
            }
          }
        }
      }
    },
    "questionItem": {
      "type": "object",
      "required": ["question"],
      "properties": {
        "question": {
          "type": "object",
          "properties": {
            "required": { "type": "boolean" },
            "grading": { "$ref": "#/$defs/grading" },
            "textQuestion": {
              "type": "object",
              "properties": {
                "paragraph": { "type": "boolean" }
              }
            },
            "choiceQuestion": { "$ref": "#/$defs/choiceQuestion" },
            "scaleQuestion": { "$ref": "#/$defs/scaleQuestion" },
            "dateQuestion": { "$ref": "#/$defs/dateQuestion" },
            "timeQuestion": { "$ref": "#/$defs/timeQuestion" },
            "ratingQuestion": { "$ref": "#/$defs/ratingQuestion" }
          }
        }
      }
    },
    "questionGroupItem": {
      "type": "object",
      "required": ["questions", "grid"],
      "properties": {
        "questions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "rowQuestion": {
                "type": "object",
                "properties": {
                  "title": { "type": "string" }
                }
              },
              "required": { "type": "boolean" }
            }
          }
        },
        "grid": {
          "type": "object",
          "required": ["columns"],
          "properties": {
            "columns": { "$ref": "#/$defs/choiceQuestion" },
            "shuffleQuestions": { "type": "boolean" }
          }
        }
      }
    },
    "choiceQuestion": {
      "type": "object",
      "required": ["type", "options"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["RADIO", "CHECKBOX", "DROP_DOWN"]
        },
        "options": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "value": { "type": "string" },
              "isOther": { "type": "boolean" },
              "goToAction": {
                "type": "string",
                "enum": ["NEXT_SECTION", "RESTART_FORM", "SUBMIT_FORM"]
              },
              "goToSectionId": { "type": "string" }
            }
          }
        },
        "shuffle": { "type": "boolean" }
      }
    },
    "scaleQuestion": {
      "type": "object",
      "properties": {
        "low": { "type": "integer" },
        "high": { "type": "integer" },
        "lowLabel": { "type": "string" },
        "highLabel": { "type": "string" }
      }
    },
    "dateQuestion": {
      "type": "object",
      "properties": {
        "includeYear": { "type": "boolean" },
        "includeTime": { "type": "boolean" }
      }
    },
    "timeQuestion": {
      "type": "object",
      "properties": {
        "duration": { "type": "boolean" }
      }
    },
    "ratingQuestion": {
      "type": "object",
      "properties": {
        "ratingScaleLevel": { "type": "integer" },
        "iconType": {
          "type": "string",
          "enum": ["STAR", "HEART", "THUMB_UP"]
        }
      }
    },
    "grading": {
      "type": "object",
      "properties": {
        "pointValue": { "type": "integer" },
        "correctAnswers": {
          "type": "object",
          "properties": {
            "answers": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "value": { "type": "string" }
                }
              }
            }
          }
        },
        "whenRight": { "$ref": "#/$defs/feedback" },
        "whenWrong": { "$ref": "#/$defs/feedback" },
        "generalFeedback": { "$ref": "#/$defs/feedback" }
      }
    },
    "feedback": {
      "type": "object",
      "properties": {
        "text": { "type": "string" },
        "material": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "link": {
                "type": "object",
                "properties": {
                  "uri": { "type": "string" },
                  "displayText": { "type": "string" }
                }
              },
              "video": {
                "type": "object",
                "properties": {
                  "youtubeUri": { "type": "string" },
                  "displayText": { "type": "string" }
                }
              }
            }
          }
        }
      }
    },
    "imageItem": {
      "type": "object",
      "properties": {
        "image": {
          "type": "object",
          "properties": {
            "sourceUri": { "type": "string" },
            "altText": { "type": "string" }
          }
        }
      }
    },
    "videoItem": {
      "type": "object",
      "properties": {
        "video": {
          "type": "object",
          "properties": {
            "youtubeUri": { "type": "string" }
          }
        }
      }
    }
  }
}
